(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{12:function(e,t,s){},30:function(e,t,s){},70:function(e,t,s){"use strict";s.r(t);var n,a=s(1),c=s.n(a),r=s(23),i=s.n(r),p=(s(30),s(3)),o=s(4),l=s(2),d=s(6),h=s(5),u=(s(12),s(0)),b=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){return Object(p.a)(this,s),t.call(this,e)}return Object(o.a)(s,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("h1",{children:"This is server"}),Object(u.jsx)("label",{for:"pid",children:"Your Prop"}),Object(u.jsx)("textarea",{name:"pid",value:this.props.con.state.c}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{for:"rid",children:"Room Id"}),Object(u.jsx)("textarea",{name:"rid",id:"lk"}),Object(u.jsx)("button",{type:"submit",onClick:this.props.server.cal,children:"Connect"})]})}}]),s}(a.Component),j=(s(13),s(10)),m=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(p.a)(this,s),(a=t.call(this,e)).send=a.send.bind(Object(l.a)(a)),a.cal=a.cal.bind(Object(l.a)(a)),n=a.props.lc.createDataChannel("sendChannel"),a.props.lc.onicecandidate=function(e){a.props.app.setState({c:JSON.stringify(a.props.lc.localDescription)})},n.onmessage=function(e){a.props.app.setState({messages:a.props.app.state.messages.concat([{text:e.data,id:a.props.app.state.messages.length,sender:{name:"He",uid:"user2",avatar:"https://i.guim.co.uk/img/media/d31ebd49b32a5aa609a584ababb1e03bc70b4942/573_213_2929_1758/master/2929.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=a54fc963e39dd6645fce012663ed13c1"}}])}),console.log(a.props.app.state.messages)},n.onopen=function(e){return console.log("open!!!!")},n.onclose=function(e){return console.log("closed!!!!!!")},a.props.lc.createOffer().then((function(e){return a.props.lc.setLocalDescription(e)})),a}return Object(o.a)(s,[{key:"send",value:function(e){this.props.app.setState({messages:this.props.app.state.messages.concat([{text:e,id:this.props.app.state.messages.length,sender:{name:"ME",uid:"user1",avatar:"https://cdn.dribbble.com/users/1041205/screenshots/3636353/dribbble.jpg"}}])}),n.send(e)}},{key:"cal",value:function(){var e=this;this.props.app.setState({r:document.getElementById("lk").value}),this.props.lc.setRemoteDescription(JSON.parse(document.getElementById("lk").value)).then((function(t){return e.props.app.chat()}))}},{key:"render",value:function(){return Object(u.jsxs)("div",{className:"App",children:[this.props.app.state.rd?Object(u.jsx)(b,{con:this.props.app,server:this}):"",this.props.app.state.rd?"":Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("div",{className:"chat-header",children:Object(u.jsx)("h5",{children:"Chat"})}),Object(u.jsx)("div",{id:"ko",children:Object(u.jsx)(j.a,{onSubmit:this.send,messages:this.props.app.state.messages},this.props.app.state.messages.length)})]})]})}}]),s}(a.Component),O=s(15),f=s.n(O),v=s(25),g=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){return Object(p.a)(this,s),t.call(this,e)}return Object(o.a)(s,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("h1",{children:"This is client"}),Object(u.jsx)("label",{for:"pi",children:"Enter the id of the server"}),Object(u.jsx)("textarea",{name:"pi",id:"sa"}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"submit",onClick:this.props.client.cal,children:"Connect"})]})}}]),s}(a.Component),x=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(p.a)(this,s),(n=t.call(this,e)).state={sid:"",pid:!0},n.cal=n.cal.bind(Object(l.a)(n)),n.send=n.send.bind(Object(l.a)(n)),n.props.lc.onicecandidate=function(e){n.setState({sid:JSON.stringify(n.props.lc.localDescription)})},n.props.lc.ondatachannel=function(e){var t=e.channel;t.onmessage=function(e){n.props.app.setState({messages:n.props.app.state.messages.concat([{text:e.data,id:n.props.app.state.messages.length,sender:{name:"He",uid:"user2",avatar:"https://i.guim.co.uk/img/media/d31ebd49b32a5aa609a584ababb1e03bc70b4942/573_213_2929_1758/master/2929.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=a54fc963e39dd6645fce012663ed13c1"}}])})},t.onopen=function(e){return n.props.app.chat()},t.onclose=function(e){return console.log("closed!!!!!!")},n.props.lc.channel=t},n}return Object(o.a)(s,[{key:"send",value:function(e){this.props.app.setState({messages:this.props.app.state.messages.concat([{text:e,id:this.props.app.state.messages.length,sender:{name:"ME",uid:"user1",avatar:"https://cdn.dribbble.com/users/1041205/screenshots/3636353/dribbble.jpg"}}])}),this.props.lc.channel.send(e)}},{key:"cal",value:function(e){var t=this;console.log(document.getElementById("sa").value),this.props.app.setState({r:document.getElementById("sa").value}),this.props.lc.setRemoteDescription(JSON.parse(document.getElementById("sa").value)).then((function(e){return console.log("done")})).then(function(){var e=Object(v.a)(f.a.mark((function e(s){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.props.lc.createAnswer().then((function(e){return t.props.lc.setLocalDescription(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(this.setState({pid:!1}))}},{key:"render",value:function(){return Object(u.jsxs)("div",{className:"App",children:[this.props.app.state.rd&&this.state.pid?Object(u.jsx)(g,{client:this}):"",this.props.app.state.rd&&!this.state.pid?this.state.sid:"",this.props.app.state.rd?"":Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("div",{className:"chat-header",children:Object(u.jsx)("h1",{children:"Chat"})}),Object(u.jsx)("div",{id:"ko",children:Object(u.jsx)(j.a,{onSubmit:this.send,messages:this.props.app.state.messages},this.props.app.state.messages.length)})]})]})}}]),s}(a.Component),k=new RTCPeerConnection({iceServers:[{urls:"stun:74.125.142.127:19302"}]}),S=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(p.a)(this,s),(n=t.call(this,e)).state={rd:!0,c:"",r:"",messages:[],server:!0,client:!1},n.chat=n.chat.bind(Object(l.a)(n)),n.setClient=n.setClient.bind(Object(l.a)(n)),n.setServer=n.setServer.bind(Object(l.a)(n)),n}return Object(o.a)(s,[{key:"chat",value:function(){this.setState({rd:!1})}},{key:"setServer",value:function(){this.setState({server:!0,client:!1})}},{key:"setClient",value:function(){this.setState({client:!0,server:!1})}},{key:"render",value:function(){return Object(u.jsxs)("div",{className:"App",children:[this.state.rd?Object(u.jsx)("button",{onClick:this.setServer,children:"Server"}):"",this.state.rd?Object(u.jsx)("button",{onClick:this.setClient,children:"Client"}):"",this.state.server?Object(u.jsx)(m,{app:this,lc:k}):"",this.state.client?Object(u.jsx)(x,{app:this,lc:k}):""]})}}]),s}(a.Component),y=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,71)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),n(e),a(e),c(e),r(e)}))};i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(S,{})}),document.getElementById("root")),y()}},[[70,1,2]]]);
//# sourceMappingURL=main.dd39abf3.chunk.js.map