(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{12:function(e,t,s){},28:function(e,t,s){},67:function(e,t,s){"use strict";s.r(t);var n,a=s(0),c=s.n(a),r=s(22),i=s.n(r),p=(s(28),s(5)),o=s(6),l=s(3),d=s(8),h=s(7),u=(s(12),s(1)),b=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){return Object(p.a)(this,s),t.call(this,e)}return Object(o.a)(s,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("label",{for:"pid",children:"Your Prop"}),Object(u.jsx)("textarea",{name:"pid",value:this.props.con.state.c}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{for:"rid",children:"Room Id"}),Object(u.jsx)("textarea",{name:"rid",id:"lk"}),Object(u.jsx)("button",{type:"submit",onClick:this.props.server.cal,children:"Connect"})]})}}]),s}(a.Component),j=(s(13),s(10)),O=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(p.a)(this,s),(a=t.call(this,e)).send=a.send.bind(Object(l.a)(a)),a.cal=a.cal.bind(Object(l.a)(a)),n=a.props.lc.createDataChannel("sendChannel"),a.props.lc.onicecandidate=function(e){a.props.app.setState({c:JSON.stringify(a.props.lc.localDescription)})},n.onmessage=function(e){a.props.app.setState({messages:a.props.app.state.messages.concat([{text:e.data,id:"1",sender:{name:"He",uid:"user2",avatar:"https://i.guim.co.uk/img/media/d31ebd49b32a5aa609a584ababb1e03bc70b4942/573_213_2929_1758/master/2929.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=a54fc963e39dd6645fce012663ed13c1"}}])}),console.log(a.props.app.state.messages)},n.onopen=function(e){return console.log("open!!!!")},n.onclose=function(e){return console.log("closed!!!!!!")},a.props.lc.createOffer().then((function(e){return a.props.lc.setLocalDescription(e)})),a}return Object(o.a)(s,[{key:"send",value:function(e){this.props.app.setState({messages:this.props.app.state.messages.concat([{text:e,id:"1",sender:{name:"ME",uid:"user1",avatar:"https://cdn.dribbble.com/users/1041205/screenshots/3636353/dribbble.jpg"}}])}),n.send(e)}},{key:"cal",value:function(){var e=this;this.props.app.setState({r:document.getElementById("lk").value}),this.props.lc.setRemoteDescription(JSON.parse(document.getElementById("lk").value)).then((function(t){return e.props.app.chat()}))}},{key:"render",value:function(){return Object(u.jsxs)("div",{className:"App",children:["This is server",this.props.app.state.rd?Object(u.jsx)(b,{con:this.props.app,server:this}):"",this.props.app.state.rd?"":Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("div",{className:"chat-header",children:Object(u.jsx)("h5",{children:"Chat"})}),Object(u.jsx)("div",{id:"ko",children:Object(u.jsx)(j.a,{onSubmit:this.send,messages:this.props.app.state.messages},this.props.app.state.messages.length)})]})]})}}]),s}(a.Component),m=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){return Object(p.a)(this,s),t.call(this,e)}return Object(o.a)(s,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"App",children:["This is client",this.props.app.state.rd?Object(u.jsx)(b,{con:this.props.app,server:this}):"",this.props.app.state.rd?"":Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("div",{className:"chat-header",children:Object(u.jsx)("h5",{children:"Chat"})}),Object(u.jsx)("div",{id:"ko",children:Object(u.jsx)(j.a,{onSubmit:this.send,messages:this.props.app.state.messages},this.props.app.state.messages.length)})]})]})}}]),s}(a.Component),v=new RTCPeerConnection({iceServers:[{urls:"stun:74.125.142.127:19302"}]}),f=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(p.a)(this,s),(n=t.call(this,e)).state={rd:!0,c:"",r:"",messages:[],server:!0,client:!1},n.chat=n.chat.bind(Object(l.a)(n)),n.setClient=n.setClient.bind(Object(l.a)(n)),n.setServer=n.setServer.bind(Object(l.a)(n)),n}return Object(o.a)(s,[{key:"chat",value:function(){this.setState({rd:!1})}},{key:"setServer",value:function(){this.setState({server:!0,client:!1})}},{key:"setClient",value:function(){this.setState({client:!0,server:!1})}},{key:"render",value:function(){return Object(u.jsxs)("div",{className:"App",children:[this.state.rd?Object(u.jsx)("button",{onClick:this.setServer,children:"Server"}):"",this.state.rd?Object(u.jsx)("button",{onClick:this.setClient,children:"Client"}):"",this.state.server?Object(u.jsx)(O,{app:this,lc:v}):"",this.state.client?Object(u.jsx)(m,{app:this,lc:v}):""]})}}]),s}(a.Component),x=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,68)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),n(e),a(e),c(e),r(e)}))};i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(f,{})}),document.getElementById("root")),x()}},[[67,1,2]]]);
//# sourceMappingURL=main.75a120a0.chunk.js.map