(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),c=n(19),i=n.n(c),r=(n(26),n(6)),o=n(7),d=n(4),l=n(9),u=n(8),b=(n(27),n(1)),h=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).cal=s.cal.bind(Object(d.a)(s)),s}return Object(o.a)(n,[{key:"cal",value:function(){var e=this;this.props.con.setState({r:document.getElementById("lk").value}),this.props.lc.setRemoteDescription(JSON.parse(document.getElementById("lk").value)).then((function(t){return e.props.con.chat()}))}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("label",{for:"pid",children:"Your Prop"}),Object(b.jsx)("textarea",{name:"pid",value:this.props.con.state.c}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{for:"rid",children:"Room Id"}),Object(b.jsx)("textarea",{name:"rid",id:"lk"}),Object(b.jsx)("button",{type:"submit",onClick:this.cal,children:"Connect"})]})}}]),n}(s.Component),j=(n(29),n(21)),p=new RTCPeerConnection,m=p.createDataChannel("sendChannel"),f=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={rd:!0,c:"",r:"",messages:[]},s.chat=s.chat.bind(Object(d.a)(s)),s.send=s.send.bind(Object(d.a)(s)),p.onicecandidate=function(e){s.setState({c:JSON.stringify(p.localDescription)})},m.onmessage=function(e){s.setState({messages:s.state.messages.concat([{text:e.data,id:"1",sender:{name:"He",uid:"user2",avatar:"https://i.guim.co.uk/img/media/d31ebd49b32a5aa609a584ababb1e03bc70b4942/573_213_2929_1758/master/2929.jpg?width=445&quality=45&auto=format&fit=max&dpr=2&s=a54fc963e39dd6645fce012663ed13c1"}}])}),console.log(s.state.messages)},m.onopen=function(e){return console.log("open!!!!")},m.onclose=function(e){return console.log("closed!!!!!!")},p.createOffer().then((function(e){return p.setLocalDescription(e)})),s}return Object(o.a)(n,[{key:"chat",value:function(){this.setState({rd:!1})}},{key:"send",value:function(e){this.setState({messages:this.state.messages.concat([{text:e,id:"1",sender:{name:"ME",uid:"user1",avatar:"https://cdn.dribbble.com/users/1041205/screenshots/3636353/dribbble.jpg"}}])}),m.send(e)}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"App",children:[this.state.rd?Object(b.jsx)(h,{con:this,lc:p}):"",this.state.rd?"":Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("div",{className:"chat-header",children:Object(b.jsx)("h5",{children:"Chat"})}),Object(b.jsx)("div",{id:"ko",children:Object(b.jsx)(j.a,{onSubmit:this.send,messages:this.state.messages},this.state.messages.length)})]})]})}}]),n}(s.Component),O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),s(e),a(e),c(e),i(e)}))};i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(f,{})}),document.getElementById("root")),O()}},[[67,1,2]]]);
//# sourceMappingURL=main.d557dc03.chunk.js.map